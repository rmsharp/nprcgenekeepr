<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Genetic Tools for Colony Management • nprcgenekeepr</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Genetic Tools for Colony Management">
<meta name="description" content="Provides genetic tools for colony management and is a derivation of the work in Amanda Vinson and Michael J Raboin (2015) &lt;https://pmc.ncbi.nlm.nih.gov/articles/PMC4671785/&gt; &quot;A Practical Approach for Designing Breeding Groups to Maximize Genetic Diversity in a Large Colony of Captive Rhesus Macaques ('Macaca' 'mulatto')&quot;. It provides a 'Shiny' application with an exposed API. The application supports five groups of functions - (1) Quality control of studbooks contained in text files or 'Excel' workbooks and of pedigrees within 'LabKey' Electronic Health Records (EHR); (2) Creation of pedigrees from a list of animals using the 'LabKey' EHR integration; (3) Creation and display of an age by sex pyramid plot of the living animals within the designated pedigree; (4) Generation of genetic value analysis reports; and (5) Creation of potential breeding groups with and without proscribed sex ratios and defined maximum kinships.">
<meta property="og:description" content="Provides genetic tools for colony management and is a derivation of the work in Amanda Vinson and Michael J Raboin (2015) &lt;https://pmc.ncbi.nlm.nih.gov/articles/PMC4671785/&gt; &quot;A Practical Approach for Designing Breeding Groups to Maximize Genetic Diversity in a Large Colony of Captive Rhesus Macaques ('Macaca' 'mulatto')&quot;. It provides a 'Shiny' application with an exposed API. The application supports five groups of functions - (1) Quality control of studbooks contained in text files or 'Excel' workbooks and of pedigrees within 'LabKey' Electronic Health Records (EHR); (2) Creation of pedigrees from a list of animals using the 'LabKey' EHR integration; (3) Creation and display of an age by sex pyramid plot of the living animals within the designated pedigree; (4) Generation of genetic value analysis reports; and (5) Creation of potential breeding groups with and without proscribed sex ratios and defined maximum kinships.">
<meta property="og:image" content="https://github.com/rmsharp/nprcgenekeepr/reference/figures/card.png">
<meta property="og:image:alt" content="Conserve Genes">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">nprcgenekeepr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/a2interactive.html">Interactive Use of nprcgenekeepr</a></li>
    <li><a class="dropdown-item" href="articles/a3manual.html">Genetic Management Tools Manual</a></li>
    <li><a class="dropdown-item" href="articles/ColonyManagerTutorial.html">GeneKeepR: A Colony Manager's Tutorial</a></li>
    <li><a class="dropdown-item" href="articles/simulatedKValues.html">Quick Example of Simulated Kinships with Partial Parentage</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/rmsharp/nprcgenekeepr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="readme">README<a class="anchor" aria-label="anchor" href="#readme"></a>
</h1>
</div>
<p>R. Mark Sharp, Ph.D. 2024-12-17</p>
</div>
<div class="section level1">
<h1 id="nprcgenekeepr-">nprcgenekeepr 
<a class="anchor" aria-label="anchor" href="#nprcgenekeepr-"></a>
</h1>
<p>Version1.0.6 (2024-12-20)</p>
<!-- badges: start -->

<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The goal of <strong>nprcgenekeepr</strong> is to implement Genetic Tools for Colony Management. It was initially conceived and developed as a Shiny web application at the Oregon National Primate Research Center (ONPRC) to facilitate some of the analyses they perform regularly. It has been enhanced to have more capability as a Shiny application and to expose the functions so they can be used either interactively or in R scripts.</p>
<p>This work has been supported in part by NIH grants P51 RR13986 to the Southwest National Primate Research Center and P51 OD011092 to the Oregon National Primate Research Center.</p>
<!--It is now managed and maintained as a joint effort between ONPRC-->
<!--and Southwest National Primate Research Center (SNPRC) with the -->
<!--coding being done by R. Mark Sharp, Ph.D.-->
<p>At present, the application supports 5 functions:</p>
<ol style="list-style-type: decimal">
<li>Quality control of studbooks contained in text files or Excel workbooks and of pedigrees within LabKey Electronic Health Records (EHR)</li>
<li>Creation of pedigrees from a lists of animals using the LabKey EHR integration</li>
<li>Creation and display of an age by sex pyramid plot of the living animals within the designated pedigree</li>
<li>Generation of Genetic Value Analysis Reports</li>
<li>Creation of potential breeding groups with and without proscribed sex ratios and defined maximum kinships.</li>
</ol>
<p><strong>For more information see:</strong><br>
A Practical Approach for Designing Breeding Groups to Maximize Genetic Diversity in a Large Colony of Captive Rhesus Macaques (<em>Macaca mulatto</em>) Vinson, A ; Raboin, MJ <em>Journal Of The American Association For Laboratory Animal Science</em>, 2015 Nov, Vol.54(6), pp.700-707 [Peer Reviewed Journal]</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the CRAN version of <strong>nprcgenekeepr</strong> from the R console prompt with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"nprcgenekeepr"</span><span class="op">)</span></span></code></pre></div>
<p>You can install the development version of <strong>nprcgenekeepr</strong> from GitHub from the R console prompt with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"rmsharp/nprcgenekeepr"</span><span class="op">)</span></span></code></pre></div>
<p>All missing dependencies should be automatically installed.</p>
</div>
<div class="section level2">
<h2 id="online-documentation">Online Documentation<a class="anchor" aria-label="anchor" href="#online-documentation"></a>
</h2>
<p>You can find the complete online documentation at <a href="https://rmsharp.github.io/nprcgenekeepr/" class="external-link uri">https://rmsharp.github.io/nprcgenekeepr/</a>.</p>
<p>At the top of the page are three menus to the right of the <code>Home</code> icon: <code>Reference</code>, <code>Articles</code>, and <code>Changelog</code>.</p>
<p>The <code>Reference</code> menu at the top of the page brings up the list of documentation for <code>Data objects</code>, <code>Major Features and Functions</code>, <code>Primary interactive functions</code> and <code>All exposed functions</code>.</p>
<p>The <code>Articles</code> menu brings up the list of vignettes, which are, except for <code>Development Plans</code>, tutorials for using the package.</p>
<p>The <code>Changelog</code> brings up a copy of the NEWS file of the package, which records the major changes made for each version.</p>
</div>
<div class="section level2">
<h2 id="running-shiny-application">Running Shiny Application<a class="anchor" aria-label="anchor" href="#running-shiny-application"></a>
</h2>
<p>The toolset available within nprcgenekeepr can be used inside standard R scripts. However, it was originally designed to be used within a Shiny application that can be started with:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rmsharp.github.io/nprcgenekeepr/" class="external-link">nprcgenekeepr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/runGeneKeepR.html">runGeneKeepR</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="summary-of-major-functions">Summary of Major Functions<a class="anchor" aria-label="anchor" href="#summary-of-major-functions"></a>
</h2>
<div class="section level3">
<h3 id="quality-control">Quality Control<a class="anchor" aria-label="anchor" href="#quality-control"></a>
</h3>
<p>Studbooks maintained by breeding colonies generally contain information of varying quality. The quality control functions of the toolkit check to ensure all animals listed as parents have their own line entries, all parents have the appropriate sex listed, no animals are listed as both a sire and a dam, duplicate entries are removed, pedigree generation numbers are added, and all dates are valid dates. In addition, exit dates are added if possible and are consistent with other information such as departure dates and death dates. Current ages of animals that are still alive are added if a database connection is provided via a configuration file and the user has read permission on a LabKey server with the demographic data in an <em>EHR</em> (Electronic Health Record) module. See <a href="https://www.labkey.org/Documentation/wiki-page.view?name=netrc" class="external-link">LabKey documentation</a>.</p>
<p>Parents with ages below a user selected threshold are identified. A minimum parent age in years is set by the user and is used to ensure each parent is at least that age on the birth date of an offspring. The minimum parent age defaults to 2 years. This check is not performed for animals with missing birth dates.</p>
</div>
<div class="section level3">
<h3 id="creation-of-pedigree-from-a-list-of-potential-breeders-and-labkey">Creation of Pedigree From a List of Potential Breeders and LabKey<a class="anchor" aria-label="anchor" href="#creation-of-pedigree-from-a-list-of-potential-breeders-and-labkey"></a>
</h3>
<p>The user can enter a list of focal animals in a CSV file that will be used to create a pedigree containing all direct relative (ancestors and descendants) via the <strong>labkey.selectRows</strong> function within the <strong>Rlabkey</strong> package if a database connection is provided via a configuration file and the user has read permission on a LabKey server with the demographic data in an <strong>EHR</strong> (Electronic Health Record) module.</p>
<p>Two configuration files are needed to use the database features of nprcgenekeepr with LabKey. The first file is named <strong>_netrc</strong> on Microsoft Windows operating systems and <strong>.netrc</strong> otherwise, allows the user to authenticate with LabKey through the LabKey API and is fully described by <a href="https://www.labkey.org/Documentation/wiki-page.view?name=netrc" class="external-link">LabKey documentation</a></p>
<p>The second file is named <strong>_nprcgenekeepr_config</strong> on Microsoft Windows operating systems and <strong>.nprcgenekeepr_config</strong> otherwise and is the <code>nprcgenekeepr</code> <a href="https://github.com/rmsharp/nprcgenekeepr/blob/master/inst/extdata/example_nprcgenekeepr_config">configuration file</a> An image of this example configuration file is included as a data object and can be loaded and viewed with the following lines of R code in the R console.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"exampleNprcgenekeeprConfig"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">exampleNprcgenekeeprConfig</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="display-of-an-age-by-sex-pyramid-plot">Display of an age by sex pyramid plot<a class="anchor" aria-label="anchor" href="#display-of-an-age-by-sex-pyramid-plot"></a>
</h3>
<p>Adapted from <a href="https://www.thoughtco.com/age-sex-pyramids-and-population-pyramids-1435272" class="external-link uri">https://www.thoughtco.com/age-sex-pyramids-and-population-pyramids-1435272</a> on 20190603. Written by Matt Rosenberg. Updated May 07, 2019.</p>
<p>The most important demographic characteristic of a population is its age-sex structure. Age-sex pyramids (also known as population pyramids) graphically display this information to improve understanding and make comparison easy. The population pyramid sometimes has a distinctive pyramid-like shape when displaying a growing population.</p>
<div class="section level4">
<h4 id="how-to-read-the-age-sex-graph">How to Read the Age-Sex Graph<a class="anchor" aria-label="anchor" href="#how-to-read-the-age-sex-graph"></a>
</h4>
<p>An age-sex pyramid breaks down a population into male and female genders and age ranges. Usually, you’ll find the left side of the pyramid graphing the male population and the right side of the pyramid displaying the female population.</p>
<p>Along the horizontal axis (x-axis) of a population pyramid, the graph displays the population either as a total population of that age or as a percentage of the population at that age. The center of the pyramid starts at zero population and extends out to the left for males and right for females in increasing size, or proportion of the population.</p>
<p>Along the vertical axis (y-axis), age-sex pyramids display two-year age increments, from birth at the bottom to old age at the top.</p>
</div>
</div>
<div class="section level3">
<h3 id="genetic-value-analysis-reports">Genetic Value Analysis Reports<a class="anchor" aria-label="anchor" href="#genetic-value-analysis-reports"></a>
</h3>
<p>The Genetic Value Analysis is a ranking scheme developed at ONPRC to indicate the relative breeding value of animals in the colony. The scheme uses the mean kinship for each animal to indicate how inter-related it is with the rest of the current breeding colony members. Genome uniqueness is used to provide an indication of whether or not an animal is likely to possess alleles at risk of being lost from the colony. Under the scheme, animals with low mean kinship or high genome uniqueness are ranked more highly.</p>
</div>
<div class="section level3">
<h3 id="breeding-group-formation">Breeding Group Formation<a class="anchor" aria-label="anchor" href="#breeding-group-formation"></a>
</h3>
<p>One of the goals in breeding group formation is to avoid the potential for mating of closely related animals. Since behavioral concerns and housing constraints will also be taken into account in the group formation process, it is our goal to provide the largest number of animals possible from a list of candidates that can be housed together without risk of consanguineous mating. To that end, this function uses information from the Genetic Value Analysis to search for the largest combinations of animals that can be produced from a list of candidates.</p>
<p>The default options do not consider the sex of individuals when forming the groups, though this has likely been a consideration by the user in selecting the candidate group members. Optionally the user may select to form harem groups, which considers the sex of individuals when forming groups and restricts the number of males to one per group.</p>
<p><strong>For more information see:</strong><br>
A Practical Approach for Designing Breeding Groups to Maximize Genetic Diversity in a Large Colony of Captive Rhesus Macaques (<em>Macaca mulatto</em>) Vinson, A ; Raboin, MJ <em>Journal Of The American Association For Laboratory Animal Science</em>, 2015 Nov, Vol.54(6), pp.700-707 [Peer Reviewed Journal]</p>
</div>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=nprcgenekeepr" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/rmsharp/nprcgenekeepr/">Browse source code</a></li>
<li><a href="https://github.com/rmsharp/nprcgenekeepr/issues">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing nprcgenekeepr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Michael Raboin <br><small class="roles"> Author </small>  </li>
<li>Terry Therneau <br><small class="roles"> Author </small>  </li>
<li>Amanda Vinson <br><small class="roles"> Author, data contributor </small>  </li>
<li>R. Mark Sharp <br><small class="roles"> Author, maintainer, copyright holder, data contributor </small> <a href="https://orcid.org/0000-0002-6170-6942" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Matthew Schultz <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-5103-4305" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Southwest National Primate Research Center NIH grant P51 RR13986 <br><small class="roles"> Funder </small>  </li>
<li>Oregon National Primate Research Center grant P51 OD011092 <br><small class="roles"> Funder </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.rdocumentation.org/packages/nprcgenekeepr" class="external-link"><img src="https://www.rdocumentation.org/badges/version/nprcgenekeepr" alt="Rdoc"></a></li>
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://github.com/rmsharp/nprcgenekeepr/actions/workflows/R-CMD-check.yaml"><img src="https://github.com/rmsharp/nprcgenekeepr/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/rmsharp/nprcgenekeepr" class="external-link"><img src="https://codecov.io/gh/rmsharp/nprcgenekeepr/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://CRAN.R-project.org/package=nprcgenekeepr" class="external-link"><img src="https://www.r-pkg.org/badges/version/nprcgenekeepr" alt="CRAN status"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michael Raboin, Terry Therneau, Amanda Vinson, R. Mark Sharp, Matthew Schultz, Southwest National Primate Research Center NIH grant P51 RR13986, Oregon National Primate Research Center grant P51 OD011092.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
